{% extends 'base_financiero.html' %}

{% load crispy_forms_tags %}

{% block content %}
<form method="post" novalidate>
	{% csrf_token %}
	<div class="row mb-2">
    	<div class="col-12 col-xl-12">
	      	<h2 class="text-uppercase darkgreen-text">Producto/Servicio</h2>
    	</div>
  	</div>
  	<div class="row darkwhite-bg py-2">
  		<div class="col-12">
  			<div class="row">
  				<div class="col-2 col-xl-2">
  					{{ form.a√±o|as_crispy_field }}
  				</div>
  				<div class="col-3 col-xl-3">
  					{{ form.centro_costos|as_crispy_field }}
  				</div>
  			</div>
  			<div class="row">
  				<div class="col-9 col-xl-9">
  					{{ form.partida|as_crispy_field }}
  				</div>
                <div class="col-9 col-xl-9">
                    {{ form.tipo_compra|as_crispy_field }}
                </div>
  			</div>
  			<div class="row">
  				<div class="col-6 col-xl-6">
  					{{ form.producto|as_crispy_field }}
  				</div>
  				<div class="col-3 col-xl-3">
  					{{ form.unidad_medida|as_crispy_field }}
  				</div>
  			</div>
  			<div class="row">
  				<div class="col-4 col-xl-4">
  					{{ form.cantidad_anual|as_crispy_field }}
  				</div>
  				<div class="col-4 col-xl-4">
  					{{ form.costo_unitario|as_crispy_field }}
  				</div>
  			</div>
  			<div class="row">
  				<div class="col-4 col-xl-4">
  					{{ form.subtotal|as_crispy_field }}
  				</div>
  				<div class="col-4 col-xl-4">
  					{{ form.total|as_crispy_field }}
  				</div>
  			</div>
  			<div class="row mt-3">
				<div class="col-12">
				<button type="submit" class="btn btn-secondary green-bg">Guardar</button>
				<a class="btn btn-secondary" href="{% url 'pac_index' %}"> Cancelar </a>
				</div>
			</div>
  		</div>
  	</div>
</form>
{% endblock %}

{% block extrafooter %}
<script type="text/javascript">
	$(document).ready(function(){
		document.getElementById("id_cantidad_anual").oninput = function(){
			var precio = document.getElementById("id_costo_unitario").value;
			var cant = document.getElementById("id_cantidad_anual").value;
			console.log(precio*cant);
			var total = precio*cant;
			document.getElementById("id_subtotal").value = total;
			document.getElementById("id_total").value = total + (total*0.12);
		};
		document.getElementById("id_costo_unitario").oninput = function(){
			var precio = document.getElementById("id_costo_unitario").value;
			var cant = document.getElementById("id_cantidad_anual").value;
			console.log(precio*cant);
			var total = precio*cant;
			document.getElementById("id_subtotal").value = total;
			document.getElementById("id_total").value = total + (total*0.12);
		};
	});
</script>
{% endblock %}